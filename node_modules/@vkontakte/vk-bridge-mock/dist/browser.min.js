!function(){"use strict";var u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],p=0,u=i.length;p<u;p++,o++)r[o]=i[p];return r}function s(i,e){var r,o,p=(r={current:0,next:function(){return++this.current}},o={},{add:function(e,t){var n=null!=t?t:r.next();return o[n]=e,n},resolve:function(e,t,n){var r=o[e];r&&(n(t)?r.resolve(t):r.reject(t),o[e]=null)}});return e(function(e){if(e.detail&&e.detail.data&&"object"==typeof e.detail.data&&"request_id"in e.detail.data){var t=e.detail.data,n=t.request_id,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(t,["request_id"]);n&&p.resolve(n,r,function(e){return!("error_type"in e)})}}),function(r,o){return void 0===o&&(o={}),new Promise(function(e,t){var n=p.add({resolve:e,reject:t},o.request_id);i(r,u(u({},o),{request_id:n}))})}}var e="undefined"!=typeof window,c=Boolean(e&&window.AndroidBridge),l=Boolean(e&&window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.VKWebAppClose),d=e&&!c&&!l,t=d&&/(^\?|&)vk_platform=mobile_web(&|$)/.test(location.search),f=d?"message":"VKWebAppEvent",b=a(["VKWebAppInit","VKWebAppGetCommunityAuthToken","VKWebAppAddToCommunity","VKWebAppAddToHomeScreenInfo","VKWebAppClose","VKWebAppCopyText","VKWebAppGetUserInfo","VKWebAppSetLocation","VKWebAppSendToClient","VKWebAppGetClientVersion","VKWebAppGetPhoneNumber","VKWebAppGetEmail","VKWebAppGetGroupInfo","VKWebAppGetGeodata","VKWebAppGetCommunityToken","VKWebAppSetTitle","VKWebAppGetAuthToken","VKWebAppCallAPIMethod","VKWebAppJoinGroup","VKWebAppLeaveGroup","VKWebAppAllowMessagesFromGroup","VKWebAppDenyNotifications","VKWebAppAllowNotifications","VKWebAppOpenPayForm","VKWebAppOpenApp","VKWebAppShare","VKWebAppShowWallPostBox","VKWebAppScroll","VKWebAppShowOrderBox","VKWebAppShowLeaderBoardBox","VKWebAppShowInviteBox","VKWebAppShowRequestBox","VKWebAppAddToFavorites","VKWebAppShowCommunityWidgetPreviewBox","VKWebAppShowStoryBox","VKWebAppSendToClient","VKWebAppStorageGet","VKWebAppStorageGetKeys","VKWebAppStorageSet","VKWebAppFlashGetInfo","VKWebAppSubscribeStoryApp","VKWebAppOpenWallPost"],d&&!t?["VKWebAppResizeWindow","VKWebAppAddToMenu","VKWebAppShowSubscriptionBox","VKWebAppShowInstallPushBox","VKWebAppGetFriends"]:[]),A=e?window.AndroidBridge:void 0,W=l?window.webkit.messageHandlers:void 0;function n(e,t){var n=t||{bubbles:!1,cancelable:!1,detail:void 0},r=document.createEvent("CustomEvent");return r.initCustomEvent(e,!!n.bubbles,!!n.cancelable,n.detail),r}"undefined"==typeof window||window.CustomEvent||(window.CustomEvent=(n.prototype=Event.prototype,n));var r=function(n){var i=void 0,p=[];function e(e){p.push(e)}function t(){return l||c}function r(){return d&&window.parent!==window}function o(){return t()||r()}"undefined"!=typeof window&&"addEventListener"in window&&window.addEventListener(f,function(t){if(l||c)return a(p).map(function(e){return e.call(null,t)});if(d&&t&&t.data){var e=t.data,n=e.type,r=e.data,o=e.frameId;n&&"VKWebAppSettings"===n?i=o:a(p).map(function(e){return e({detail:{type:n,data:r}})})}});var u=s(function(e,t){A&&A[e]?A[e](JSON.stringify(t)):W&&W[e]&&"function"==typeof W[e].postMessage?W[e].postMessage(t):d&&parent.postMessage({handler:e,params:t,type:"vk-connect",webFrameId:i,connectVersion:n},"*")},e);return{send:u,sendPromise:u,subscribe:e,unsubscribe:function(e){var t=p.indexOf(e);-1<t&&p.splice(t,1)},supports:function(e){return c?!(!A||"function"!=typeof A[e]):l?!(!W||!W[e]||"function"!=typeof W[e].postMessage):d&&-1<b.indexOf(e)},isWebView:t,isIframe:r,isEmbedded:o,isStandalone:function(){return!o()}}}("2.4.1"),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function V(n,r){var o,i,p,e,u={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(p=2&t[0]?i.return:t[0]?i.throw||((p=i.return)&&p.call(i),0):i.next)&&!(p=p.call(i,t[1])).done)return p;switch(i=0,p&&(t=[2&t[0],p.value]),t[0]){case 0:case 1:p=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(p=0<(p=u.trys).length&&p[p.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!p||t[1]>p[0]&&t[1]<p[3])){u.label=t[1];break}if(6===t[0]&&u.label<p[1]){u.label=p[1],p=t;break}if(p&&u.label<p[2]){u.label=p[2],u.ops.push(t);break}p[2]&&u.ops.pop(),u.trys.pop();continue}t=r.call(n,u)}catch(e){t=[6,e],i=0}finally{o=p=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function i(e,t){return w(e)&&v[e]?v[e](t):null}function K(t){y.listeners.forEach(function(e){e(t)})}function m(e,t){if(!w(e))throw new Error("Missing mock data for "+e+" event");var n,r=i(e,t);if(null==r)throw new Error("Unable to get mock data for "+e+" event");return n=e,g.includes(n)?{detail:{type:e,data:r}}:{detail:{type:e+"Result",data:o(o({},i(e,t)),{request_id:y.getNextRequestId()})}}}function p(r,o){return a=function(){return V(this,function(e){return[2,new Promise(function(e,t){if(w(r)){var n=m(r,o);n&&(K(n),e(n.detail.data))}})]})},new(u=(u=p=i=void 0)||Promise)(function(e,t){function n(e){try{o(a.next(e))}catch(e){t(e)}}function r(e){try{o(a.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new u(function(e){e(t.value)}).then(n,r)}o((a=a.apply(i,p||[])).next())});var i,p,u,a}var y={listeners:[],currentRequestId:0,appStorage:{keys:[{key:"somekey0",value:"somevalue0"},{key:"somekey1",value:"somevalue1"}]},getNextRequestId:function(){return this.currentRequestId++,this.currentRequestId},getAppStorage:function(e){var t=e.keys;return{keys:this.appStorage.keys.filter(function(e){return t.includes(e.key)})}},getAppStorageKeys:function(){return{keys:this.appStorage.keys.map(function(e){return e.key})}},setAppStorageItem:function(e){var t=e.key,n=e.value;return this.appStorage={keys:y.appStorage.keys.concat({key:t,value:n})},{result:!0}}},h="yours000access111token222yours000access111token222yours000access111token2220123456789",v={VKWebAppInit:function(){return{result:!0}},VKWebAppAddToCommunity:function(){return{group_id:123456789}},VKWebAppAllowMessagesFromGroup:function(){return{result:!0}},VKWebAppAllowNotifications:function(){return{result:!0}},VKWebAppCallAPIMethod:function(){return{response:[{id:210700286,first_name:"Lindsey",last_name:"Stirling",is_closed:!1,can_access_closed:!0,city:{id:5331,title:"Los Angeles"},photo_50:"https://vk.com/images/camera_50.png",verified:1}]}},VKWebAppGetAuthToken:function(){return{access_token:h,scope:"friends,photos,video,wall"}},VKWebAppClose:function(){return{payload:{}}},VKWebAppOpenApp:function(){return{result:!0}},VKWebAppDenyNotifications:function(){return{result:!0}},VKWebAppFlashGetInfo:function(){return{is_available:!0,level:1.6}},VKWebAppFlashSetLevel:function(){return{result:!0}},VKWebAppGetClientVersion:function(){return{platform:"android",version:"5.3.2"}},VKWebAppGetEmail:function(){return{email:"test@gmail.com",sign:"Y1C99xnbEaR8Wred"}},VKWebAppGetFriends:function(){return{users:[{id:2884043,first_name:"Albert",last_name:"Usmanov",sex:2,photo_200:"https://vk.com/images/camera_200.png"},{id:1894768,first_name:"Aleksandra",last_name:"Sokolovskaya",sex:1,photo_200:"https://vk.com/images/camera_200.png"}]}},VKWebAppGetGeodata:function(){return{available:1,lat:59.938,long:30.312,accuracy:65}},VKWebAppGetPersonalCard:function(){return{phone:"+79001112233",email:"ivan@gmail.com",address:{country:{id:1,name:"Россия"},city:{id:2,name:"Санкт-Петербург"},specified_address:"Невский пр., д. 28",postal_code:"191186"}}},VKWebAppGetPhoneNumber:function(){return{phone_number:"79111234567",sign:"Y1C99xnbEaR8Wred",is_verified:!0}},VKWebAppGetUserInfo:function(){return{id:2314852,first_name:"Ирина",last_name:"Денежкина",sex:1,city:{id:2,title:"Санкт-Петербург"},country:{id:1,title:"Россия"},bdate:"10.4.1990",photo_100:"https://vk.com/images/camera_100.png",photo_200:"https://vk.com/images/camera_200.png",timezone:3}},VKWebAppJoinGroup:function(){return{result:!0}},VKWebAppOpenCodeReader:function(){return{code_data:"Some text"}},VKWebAppOpenQR:function(){return{code_data:"Some text"}},VKWebAppOpenContacts:function(){return{phone:"79217770099",first_name:"Сестра",last_name:""}},VKWebAppOpenPayForm:function(){return{status:!0,transaction_id:"150349AC-BDC6-11E9-83B6-5D798FB6FAB1",amount:"1.01",extra:null}},VKWebAppResizeWindow:function(){return{width:800,height:1e3}},VKWebAppScroll:function(){return{top:1,height:2040}},VKWebAppSetLocation:function(){return{result:!0}},VKWebAppSetViewSettings:function(){return{result:!0}},VKWebAppShare:function(){return{type:"link"}},VKWebAppShowCommunityWidgetPreviewBox:function(){return{result:!0}},VKWebAppShowImages:function(){return{result:!0}},VKWebAppShowInviteBox:function(){return{success:!0}},VKWebAppShowLeaderBoardBox:function(){return{success:!0}},VKWebAppShowMessageBox:function(){return{result:!0}},VKWebAppShowOrderBox:function(){return{status:"cancel"}},VKWebAppShowRequestBox:function(){return{success:!0,requestKey:"123242"}},VKWebAppShowWallPostBox:function(){return{post_id:1}},VKWebAppStorageGet:y.getAppStorage.bind(y),VKWebAppStorageGetKeys:y.getAppStorageKeys.bind(y),VKWebAppStorageSet:y.setAppStorageItem.bind(y),VKWebAppTapticImpactOccurred:function(){return{result:!0}},VKWebAppTapticNotificationOccurred:function(){return{result:!0}},VKWebAppTapticSelectionChanged:function(){return{result:!0}},VKWebAppAddToFavorites:function(){return{result:!0}},VKWebAppSendPayload:function(){return{result:!0}},VKWebAppGetCommunityToken:function(){return{access_token:h}},VKWebAppDisableSwipeBack:function(){return{result:!0}},VKWebAppEnableSwipeBack:function(){return{result:!0}},VKWebAppAudioPaused:function(){return{type:"file",position:34,id:"audio_track_01.mp3"}},VKWebAppAudioStopped:function(){return{}},VKWebAppAudioTrackChanged:function(){return{type:"file",id:"audio_track_01.mp3"}},VKWebAppAudioUnpaused:function(){return{type:"file",id:"audio_track_01.mp3"}},VKWebAppInitAds:function(){return{init:"true"}},VKWebAppLoadAds:function(){return{load:"true"}},VKWebAppUpdateConfig:function(){return{app:"vkclient",app_id:"3087106",appearance:"light",insets:{top:0,left:0,right:0,bottom:0},scheme:"client_light",start_time:1565272434.911599}},VKWebAppViewHide:function(){return{}},VKWebAppViewRestore:function(){return{}},VKWebAppShowStoryBox:function(){return{result:!0}},VKWebAppAccelerometerChanged:function(){return{x:"3.0",y:"-1.3",z:"0.0"}},VKWebAppAccelerometerStart:function(){return{result:!0}},VKWebAppAccelerometerStop:function(){return{result:!0}},VKWebAppAudioPause:function(){return{result:!0}},VKWebAppCopyText:function(){return{result:!0}},VKWebAppDeviceMotionChanged:function(){return{alpha:"3.0",beta:"-1.3",gamma:"0.0"}},VKWebAppDeviceMotionStart:function(){return{result:!0}},VKWebAppDeviceMotionStop:function(){return{result:!0}},VKWebAppGyroscopeChanged:function(){return{x:"3.0",y:"-1.3",z:"0.0"}},VKWebAppGyroscopeStart:function(){return{result:!0}},VKWebAppGyroscopeStop:function(){return{result:!0}},VKWebAppLocationChanged:function(){return{location:"test"}},VKWebAppSubscribeStoryApp:function(){return{access_key:h}},VKWebAppUpdateInsets:function(){return{insets:{right:0,top:44,left:0,bottom:34}}},VKWebAppAddToHomeScreen:function(){return{result:!0}},VKWebAppAddToHomeScreenInfo:function(){return{is_feature_supported:!0,is_added_to_home_screen:!0}},OKWebAppCallAPIMethod:function(){return{response:[{id:584276368330,last_name:"Терещенков",is_closed:!1,can_access_closed:!0,first_name:"Денис"}]}},VKWebAppDownloadFile:function(){return{result:!0}},VKWebAppLeaveGroup:function(){return{result:!0}},VKWebAppAddToMenu:function(){return{result:!0}},VKWebAppSendToClient:function(){return{result:!0}},VKWebAppOpenWallPost:function(){return{result:!0}},VKWebAppSetSwipeSettings:function(){return{result:!0}},VKWebAppGetGroupInfo:function(){return{id:166562603,name:"VK Mini Apps",screen_name:"club166562603",photo_50:"https://vk.com/images/community_50.png",photo_100:"https://vk.com/images/community_100.png",photo_200:"https://vk.com/images/community_200.png",is_closed:0,members_count:46978,description:"Group Description",type:"page",is_member:1}},VKWebAppLibverifyOnConfirmed:function(){return{validate_session:"some_string",validate_token:"some_token"}},VKWebAppLibverifyOnFailed:function(){return{code:"INCORRECT_PHONE_NUMBER"}},VKWebAppRetargetingPixel:function(){return{result:!0}}},g=["VKWebAppAudioPaused","VKWebAppAudioStopped","VKWebAppAudioTrackChanged","VKWebAppAudioUnpaused","VKWebAppInitAds","VKWebAppLoadAds","VKWebAppUpdateConfig","VKWebAppViewHide","VKWebAppViewRestore"],w=function(e){return e in v},S={send:p,sendPromise:p,subscribe:function(e){y.listeners.push(e)},unsubscribe:function(e){var t=y.listeners.indexOf(e);-1<t&&y.listeners.splice(t,1)},supports:function(e){return r.supports(e)},isWebView:function(){return r.isWebView()},isIframe:function(){return r.isIframe()},isEmbedded:function(){return r.isEmbedded()},isStandalone:function(){return r.isStandalone()}};window.vkBridgeMock=window.vkConnectMock=S,window.vkBridgeCallReceiveOnlyMethod=function(e){if(g.includes(e)){var t=m(e);t&&K(t)}}}();
